{
    "componentChunkName": "component---node-modules-smooth-doc-src-templates-doc-js",
    "path": "/docs/designer/plugins/",
    "result": {"data":{"mdx":{"fields":{"pageType":"doc","title":"Plugins","editLink":""},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Plugins\",\n  \"section\": \"BUILDING A CHATBOT WITH DESIGNER\",\n  \"order\": 3\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"plugins\"\n  }, mdx(\"a\", {\n    parentName: \"h1\",\n    \"href\": \"#plugins\",\n    \"aria-hidden\": true,\n    \"className\": \"anchor\"\n  }, mdx(\"svg\", {\n    \"aria-hidden\": \"true\",\n    height: \"16\",\n    version: \"1.1\",\n    viewBox: \"0 0 16 16\",\n    width: \"16\"\n  }, mdx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Plugins\"), mdx(\"p\", null, \"Plugins are \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"the best way to provide API integrations and business logic\"), \" to your chatbot. Plugins is a serverside code with customisable representation in a wingbot.ai designer.\"), mdx(\"h2\", {\n    \"id\": \"plugin-representation-in-designer\"\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#plugin-representation-in-designer\",\n    \"aria-hidden\": true,\n    \"className\": \"anchor\"\n  }, mdx(\"svg\", {\n    \"aria-hidden\": \"true\",\n    height: \"16\",\n    version: \"1.1\",\n    viewBox: \"0 0 16 16\",\n    width: \"16\"\n  }, mdx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Plugin representation in designer\"), mdx(\"p\", null, \"Each plugin can be used as any other conversation element like message.\"), mdx(\"p\", null, mdx(\"img\", {\n    parentName: \"p\",\n    \"src\": \"../../../plugins.png\",\n    \"alt\": \"wingbot plugin\",\n    \"title\": \"Wingbot Chatbot Plugin\"\n  })), mdx(\"h2\", {\n    \"id\": \"configuring-the-designer\"\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#configuring-the-designer\",\n    \"aria-hidden\": true,\n    \"className\": \"anchor\"\n  }, mdx(\"svg\", {\n    \"aria-hidden\": \"true\",\n    height: \"16\",\n    version: \"1.1\",\n    viewBox: \"0 0 16 16\",\n    width: \"16\"\n  }, mdx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Configuring the designer\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"[\\n  {\\n    \\\"id\\\": \\\"exampleBlock\\\",\\n    \\\"name\\\": \\\"example block name\\\",\\n    \\\"description\\\": \\\"example block description text\\\",\\n    \\\"inputs\\\": [\\n      {\\n        \\\"type\\\": \\\"text\\\",\\n        \\\"name\\\": \\\"text\\\",\\n        \\\"label\\\": \\\"Text\\\",\\n        \\\"validations\\\": [\\n            {\\n                \\\"type\\\": \\\"regexp\\\",\\n                \\\"value\\\": \\\"^(\\\\\\\\s*).{0,2}$\\\",\\n                \\\"message\\\": \\\"Should not be shorter than 3 letters!\\\"\\n            }\\n        ]\\n      },\\n      {\\n        \\\"type\\\": \\\"select\\\",\\n        \\\"name\\\": \\\"sel\\\",\\n        \\\"label\\\": \\\"Select\\\",\\n        \\\"options\\\": [\\n          {\\n            \\\"value\\\": \\\"val\\\",\\n            \\\"label\\\": \\\"lab\\\"\\n          }\\n        ]\\n      }\\n    ],\\n    \\\"items\\\": [\\n      {\\n        \\\"id\\\": \\\"responseBlockName\\\",\\n        \\\"description\\\": \\\"description of an interaction block\\\"\\n      }\\n    ]\\n  }\\n]\\n\")), mdx(\"p\", null, \"You can specify:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"inputs\"), \" - configuration of each plugin\"), mdx(\"p\", {\n    parentName: \"li\"\n  }, \"  There are two types: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"text\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"select\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"array\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"postback\"), \". Input data are accessible in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"params\"), \" as a 5th parameter of plugin and in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"req.params\"), \".\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"items\"), \" - the response blocks\"), mdx(\"p\", {\n    parentName: \"li\"\n  }, \"  Blocks of conversation elements to respond with. How to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"pass the data\"), \" to messages? You can use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"res.setData({ myVar: 'foo' })\"), \" and use the Handlebars template in message like \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"{{myVar}}\")))), mdx(\"h2\", {\n    \"id\": \"plugin-as-a-function\"\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#plugin-as-a-function\",\n    \"aria-hidden\": true,\n    \"className\": \"anchor\"\n  }, mdx(\"svg\", {\n    \"aria-hidden\": \"true\",\n    height: \"16\",\n    version: \"1.1\",\n    viewBox: \"0 0 16 16\",\n    width: \"16\"\n  }, mdx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Plugin as a function\"), mdx(\"p\", null, \"You can register your plugin simply.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, \"const { Plugins } = require('wingbot');\\n\\nconst plugins = new Plugins();\\n\\nplugins.register('exampleBlock', async (req, res, postBack) => {\\n    // load the plugin configuration\\n    const { text, sel } = req.params;\\n\\n    // set data to make them accessible in handlebars templates\\n    res.setData({ myVar: text' });\\n\\n    // run an interaction block\\n    await res.run('responseBlockName');\\n});\\n\\nmodule.exports = plugins;\\n\")), mdx(\"h2\", {\n    \"id\": \"understanding-return-values\"\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#understanding-return-values\",\n    \"aria-hidden\": true,\n    \"className\": \"anchor\"\n  }, mdx(\"svg\", {\n    \"aria-hidden\": \"true\",\n    height: \"16\",\n    version: \"1.1\",\n    viewBox: \"0 0 16 16\",\n    width: \"16\"\n  }, mdx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Understanding return values\"), mdx(\"p\", null, \"How to use directives \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Router.NEXT\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Router.END\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Router.CONTINUE\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Router.BREAK\")), mdx(\"p\", null, mdx(\"img\", {\n    parentName: \"p\",\n    \"src\": \"../../../returns.png\",\n    \"alt\": \"wingbot plugin\",\n    \"title\": \"Wingbot Chatbot Plugin\"\n  })), mdx(\"h2\", {\n    \"id\": \"plugin-as-a-nested-router\"\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#plugin-as-a-nested-router\",\n    \"aria-hidden\": true,\n    \"className\": \"anchor\"\n  }, mdx(\"svg\", {\n    \"aria-hidden\": \"true\",\n    height: \"16\",\n    version: \"1.1\",\n    viewBox: \"0 0 16 16\",\n    width: \"16\"\n  }, mdx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Plugin as a nested Router\"), mdx(\"p\", null, \"For more sophisticated use cases you can use the router as a plugin. \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"But don't forget to register it as a factory!\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, \"const { Plugins, Router } = require('wingbot');\\n\\nconst plugins = new Plugins();\\n\\nfunction exampleBlockFactory (params) {\\n  // load the plugin configuration\\n  const { text } = params;\\n\\n  // there you're able to validate the params\\n\\n  const exampleBlock = new Router();\\n\\n  // an incomming route\\n  exampleBlock.use('/', (req, res, postBack) => {\\n\\n      // send the text as a response\\n      res.text(text);\\n\\n      // make some async job\\n      postBack('after-timeout', async () => {\\n          await new Promise(r => setTimeout(r, 1000));\\n          return { myVar: 'foo' };\\n      });\\n  });\\n\\n  // following action\\n  exampleBlock.use('after-timeout', async (req, res) => {\\n      const { myVar } = req.actionData();\\n\\n      await res.run('responseBlockName');\\n  });\\n\\n  return exampleBlock;\\n}\\n\\nplugins.registerFactory('exampleBlock', exampleBlockFactory);\\n\\nmodule.exports = plugins;\\n\")), mdx(\"h2\", {\n    \"id\": \"testing-the-plugin\"\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#testing-the-plugin\",\n    \"aria-hidden\": true,\n    \"className\": \"anchor\"\n  }, mdx(\"svg\", {\n    \"aria-hidden\": \"true\",\n    height: \"16\",\n    version: \"1.1\",\n    viewBox: \"0 0 16 16\",\n    width: \"16\"\n  }, mdx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Testing the plugin\"), mdx(\"p\", null, \"You can use the Tester util.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, \"const { Tester } = require('wingbot');\\nconst plugins = require('../../bot/plugins');\\n\\ndescribe('exampleBlock plugin', function () {\\n\\n    it('should work', async function () {\\n        const t = new Tester(plugins.getWrappedPlugin('exampleBlock'));\\n\\n        await t.postBack('/'); // run the initial action\\n\\n        await new Promise(r => setTimeout(r, 1500));\\n\\n        // asserts\\n        t.respondedWithBlock('responseBlockName');\\n        t.passedAction('after-timeout');\\n    });\\n\\n});\\n\")), mdx(\"p\", null, \"There is a complex example.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"it passes params to plugins\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"implements some conversation items, which can be trigged with \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"res.run()\"), \" method\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"allows to test behavior of plugin in attached in a bot\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, \"const { Tester, Router } = require('wingbot');\\nconst plugins = require('../../bot/plugins');\\n\\ndescribe('complex plugin', function () {\\n\\n    it('should work', async function () {\\n        const bot = new Router();\\n\\n        const items = {\\n            responseBlockName: (req, res) => { res.text('done'); }\\n        };\\n\\n        bot.use('there-is-plugin', plugins\\n            .getWrappedPlugin('exampleBlock', { text: 'the text' }, items));\\n\\n        bot.use((req, res) => {\\n            res.text('fallback');\\n        });\\n\\n        const t = new Tester(bot);\\n\\n        await t.postBack('there-is-plugin'); // run the initial action\\n\\n        t.any().contains('the text');\\n\\n        await new Promise(r => setTimeout(r, 1500));\\n\\n        t.any().contains('after-timeout');\\n    });\\n\\n});\\n\")), mdx(\"h2\", {\n    \"id\": \"nested-forms-in-plugin-configuration\"\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#nested-forms-in-plugin-configuration\",\n    \"aria-hidden\": true,\n    \"className\": \"anchor\"\n  }, mdx(\"svg\", {\n    \"aria-hidden\": \"true\",\n    height: \"16\",\n    version: \"1.1\",\n    viewBox: \"0 0 16 16\",\n    width: \"16\"\n  }, mdx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Nested forms in plugin configuration\"), mdx(\"p\", null, \"if you want to gather \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"array of objects\"), \" for your plugin's configuration, you can use an \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"array\"), \" input type.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"keyPropertyName: string\"), \" - required identifying property of each object\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"column: { name: string, label: string }[]\"), \" - to make the table more readable, theres ability to show additional label columns\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n  \\\"type\\\": \\\"array\\\",\\n  \\\"name\\\": \\\"products\\\",\\n  \\\"label\\\": \\\"List of products\\\",\\n  \\\"keyPropertyName\\\": \\\"ean\\\",\\n  \\\"columns\\\": [ // optional\\n    {\\n      \\\"name\\\": \\\"product_name\\\",\\n      \\\"label\\\": \\\"Product name\\\"\\n    }\\n  ],\\n  \\\"inputs\\\": [\\n    {\\n      \\\"type\\\": \\\"text\\\",\\n      \\\"name\\\": \\\"ean\\\",\\n      \\\"label\\\": \\\"Unique identification of product\\\"\\n    },\\n    {\\n      \\\"type\\\": \\\"text\\\",\\n      \\\"name\\\": \\\"product_name\\\",\\n      \\\"label\\\": \\\"Product name\\\"\\n    }\\n  ]\\n}\\n\")), mdx(\"p\", null, \"This input will produce a params object like this:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, \"{\\n  products: [\\n    {\\n      ean: '123132321',\\n      product_name: 'Foo'\\n    },\\n    {\\n      ean: '8989898',\\n      product_name: 'Bar'\\n    }\\n  ]\\n}\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","tableOfContents":{"items":[{"url":"#plugins","title":"Plugins","items":[{"url":"#plugin-representation-in-designer","title":"Plugin representation in designer"},{"url":"#configuring-the-designer","title":"Configuring the designer"},{"url":"#plugin-as-a-function","title":"Plugin as a function"},{"url":"#understanding-return-values","title":"Understanding return values"},{"url":"#plugin-as-a-nested-router","title":"Plugin as a nested Router"},{"url":"#testing-the-plugin","title":"Testing the plugin"},{"url":"#nested-forms-in-plugin-configuration","title":"Nested forms in plugin configuration"}]}]}}},"pageContext":{"id":"81694794-b30a-55fc-b8e1-46c8b0624110"}},
    "staticQueryHashes": ["1122327541","1339625561","148928582","2140385554","3442269102","4275725850"]}